-- ১. আগের টেবিল থাকলে মুছে ফেলুন (Reset)
DROP TABLE IF EXISTS public.daily_lists;

-- ২. নতুন টেবিল তৈরি করুন (Create Table)
CREATE TABLE public.daily_lists (
    id bigint generated by default as identity primary key,
    date text not null, -- তারিখ (YYYY-MM-DD)
    shift text not null, -- শিফট (day/night)
    numbers jsonb default '[]'::jsonb, -- আপনার লিস্টের ডাটা এখানে থাকবে
    created_at timestamp with time zone default timezone('utc'::text, now()) not null,
    
    -- একটি তারিখে একটি শিফটের জন্য একটাই রো থাকবে (Unique Constraint)
    CONSTRAINT daily_lists_date_shift_key UNIQUE (date, shift)
);

-- ৩. সিকিউরিটি পলিসি চালু করুন (Enable RLS)
ALTER TABLE public.daily_lists ENABLE ROW LEVEL SECURITY;

-- ৪. পাবলিক এক্সেস দিন (যাতে অ্যাপ থেকে রিড/রাইট করা যায়)
CREATE POLICY "Enable all access for everyone" 
ON public.daily_lists 
FOR ALL 
USING (true) 
WITH CHECK (true);

-- ৫. রিয়েল-টাইম চালু করুন (যাতে অটোমেটিক আপডেট হয়)
ALTER PUBLICATION supabase_realtime ADD TABLE public.daily_lists;
